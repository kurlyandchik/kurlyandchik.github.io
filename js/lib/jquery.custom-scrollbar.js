!function(e){e.fn.customScrollbar=function(i,t){var o={skin:void 0,hScroll:!0,vScroll:!0,updateOnWindowResize:!1,animationSpeed:300,onCustomScroll:void 0,swipeSpeed:1,wheelSpeed:40,fixedThumbWidth:void 0,fixedThumbHeight:void 0,preventDefaultScroll:!1},s=function(i,t){this.$element=e(i),this.options=t,this.addScrollableClass(),this.addSkinClass(),this.addScrollBarComponents(),this.options.vScroll&&(this.vScrollbar=new n(this,new r)),this.options.hScroll&&(this.hScrollbar=new n(this,new l)),this.$element.data("scrollable",this),this.initKeyboardScrolling(),this.bindEvents()};s.prototype={addScrollableClass:function(){this.$element.hasClass("scrollable")||(this.scrollableAdded=!0,this.$element.addClass("scrollable"))},removeScrollableClass:function(){this.scrollableAdded&&this.$element.removeClass("scrollable")},addSkinClass:function(){"string"!=typeof this.options.skin||this.$element.hasClass(this.options.skin)||(this.skinClassAdded=!0,this.$element.addClass(this.options.skin))},removeSkinClass:function(){this.skinClassAdded&&this.$element.removeClass(this.options.skin)},addScrollBarComponents:function(){this.assignViewPort(),0==this.$viewPort.length&&(this.$element.wrapInner('<div class="viewport" />'),this.assignViewPort(),this.viewPortAdded=!0),this.assignOverview(),0==this.$overview.length&&(this.$viewPort.wrapInner('<div class="overview" />'),this.assignOverview(),this.overviewAdded=!0),this.addScrollBar("vertical","prepend"),this.addScrollBar("horizontal","append")},removeScrollbarComponents:function(){this.removeScrollbar("vertical"),this.removeScrollbar("horizontal"),this.overviewAdded&&this.$element.unwrap(),this.viewPortAdded&&this.$element.unwrap()},removeScrollbar:function(e){this[e+"ScrollbarAdded"]&&this.$element.find(".scroll-bar."+e).remove()},assignViewPort:function(){this.$viewPort=this.$element.find(".viewport")},assignOverview:function(){this.$overview=this.$viewPort.find(".overview")},addScrollBar:function(e,i){0==this.$element.find(".scroll-bar."+e).length&&(this.$element[i]("<div class='scroll-bar "+e+"'><div class='thumb'></div></div>"),this[e+"ScrollbarAdded"]=!0)},resize:function(e){this.vScrollbar&&this.vScrollbar.resize(e),this.hScrollbar&&this.hScrollbar.resize(e)},scrollTo:function(e){this.vScrollbar&&this.vScrollbar.scrollToElement(e),this.hScrollbar&&this.hScrollbar.scrollToElement(e)},scrollToXY:function(e,i){this.scrollToX(e),this.scrollToY(i)},scrollToX:function(e){this.hScrollbar&&this.hScrollbar.scrollOverviewTo(e,!0)},scrollToY:function(e){this.vScrollbar&&this.vScrollbar.scrollOverviewTo(e,!0)},scrollByX:function(e){this.hScrollbar&&this.scrollToX(this.hScrollbar.overviewPosition()+e)},scrollByY:function(e){this.vScrollbar&&this.scrollToY(this.vScrollbar.overviewPosition()+e)},remove:function(){this.removeScrollableClass(),this.removeSkinClass(),this.removeScrollbarComponents(),this.$element.data("scrollable",null),this.removeKeyboardScrolling(),this.vScrollbar&&this.vScrollbar.remove(),this.hScrollbar&&this.hScrollbar.remove()},setAnimationSpeed:function(e){this.options.animationSpeed=e},isInside:function(i,t){var o=e(i),s=e(t),n=o.offset(),l=s.offset();return n.top>=l.top&&n.left>=l.left&&n.top+o.height()<=l.top+s.height()&&n.left+o.width()<=l.left+s.width()},initKeyboardScrolling:function(){var e=this;this.elementKeydown=function(i){document.activeElement===e.$element[0]&&(e.vScrollbar&&e.vScrollbar.keyScroll(i),e.hScrollbar&&e.hScrollbar.keyScroll(i))},this.$element.attr("tabindex","-1").keydown(this.elementKeydown)},removeKeyboardScrolling:function(){this.$element.removeAttr("tabindex").unbind("keydown",this.elementKeydown)},bindEvents:function(){this.options.onCustomScroll&&this.$element.on("customScroll",this.options.onCustomScroll)}};var n=function(e,i){this.scrollable=e,this.sizing=i,this.$scrollBar=this.sizing.scrollBar(this.scrollable.$element),this.$thumb=this.$scrollBar.find(".thumb"),this.setScrollPosition(0,0),this.resize(),this.initMouseMoveScrolling(),this.initMouseWheelScrolling(),this.initTouchScrolling(),this.initMouseClickScrolling(),this.initWindowResize()};n.prototype={resize:function(e){this.overviewSize=this.sizing.size(this.scrollable.$overview),this.calculateViewPortSize(),this.sizing.size(this.scrollable.$viewPort,this.viewPortSize),this.ratio=this.viewPortSize/this.overviewSize,this.sizing.size(this.$scrollBar,this.viewPortSize),this.thumbSize=this.calculateThumbSize(),this.sizing.size(this.$thumb,this.thumbSize),this.maxThumbPosition=this.calculateMaxThumbPosition(),this.maxOverviewPosition=this.calculateMaxOverviewPosition(),this.enabled=this.overviewSize>this.viewPortSize,void 0===this.scrollPercent&&(this.scrollPercent=0),this.enabled?this.rescroll(e):this.setScrollPosition(0,0),this.$scrollBar.toggle(this.enabled)},calculateViewPortSize:function(){var e=this.sizing.size(this.scrollable.$element);if(e>0&&!this.maxSizeUsed)this.viewPortSize=e,this.maxSizeUsed=!1;else{var i=this.sizing.maxSize(this.scrollable.$element);this.viewPortSize=Math.min(i,this.overviewSize),this.maxSizeUsed=!0}},calculateThumbSize:function(){var e,i=this.sizing.fixedThumbSize(this.scrollable.options);return e=i||this.ratio*this.viewPortSize,Math.max(e,this.sizing.minSize(this.$thumb))},initMouseMoveScrolling:function(){var i=this;this.$thumb.mousedown(function(e){i.enabled&&i.startMouseMoveScrolling(e)}),this.documentMouseup=function(e){i.stopMouseMoveScrolling(e)},e(document).mouseup(this.documentMouseup),this.documentMousemove=function(e){i.mouseMoveScroll(e)},e(document).mousemove(this.documentMousemove),this.$thumb.click(function(e){e.stopPropagation()})},removeMouseMoveScrolling:function(){this.$thumb.unbind(),e(document).unbind("mouseup",this.documentMouseup),e(document).unbind("mousemove",this.documentMousemove)},initMouseWheelScrolling:function(){var e=this;this.scrollable.$element.mousewheel(function(i,t,o,s){if(e.enabled){var n=e.mouseWheelScroll(o,s);e.stopEventConditionally(i,n)}})},removeMouseWheelScrolling:function(){this.scrollable.$element.unbind("mousewheel")},initTouchScrolling:function(){if(document.addEventListener){var e=this;this.elementTouchstart=function(i){e.enabled&&e.startTouchScrolling(i)},this.scrollable.$element[0].addEventListener("touchstart",this.elementTouchstart),this.documentTouchmove=function(i){e.touchScroll(i)},this.scrollable.$element[0].addEventListener("touchmove",this.documentTouchmove),this.elementTouchend=function(i){e.stopTouchScrolling(i)},this.scrollable.$element[0].addEventListener("touchend",this.elementTouchend)}},removeTouchScrolling:function(){document.addEventListener&&(this.scrollable.$element[0].removeEventListener("touchstart",this.elementTouchstart),document.removeEventListener("touchmove",this.documentTouchmove),this.scrollable.$element[0].removeEventListener("touchend",this.elementTouchend))},initMouseClickScrolling:function(){var e=this;this.scrollBarClick=function(i){e.mouseClickScroll(i)},this.$scrollBar.click(this.scrollBarClick)},removeMouseClickScrolling:function(){this.$scrollBar.unbind("click",this.scrollBarClick)},initWindowResize:function(){if(this.scrollable.options.updateOnWindowResize){var i=this;this.windowResize=function(){i.resize()},e(window).resize(this.windowResize)}},removeWindowResize:function(){e(window).unbind("resize",this.windowResize)},isKeyScrolling:function(e){return null!=this.keyScrollDelta(e)},keyScrollDelta:function(e){for(var i in this.sizing.scrollingKeys)if(i==e)return this.sizing.scrollingKeys[e](this.viewPortSize);return null},startMouseMoveScrolling:function(i){this.mouseMoveScrolling=!0,e("body").addClass("not-selectable"),this.setUnselectable(e("body"),"on"),this.setScrollEvent(i),i.preventDefault()},stopMouseMoveScrolling:function(i){this.mouseMoveScrolling=!1,e("body").removeClass("not-selectable"),this.setUnselectable(e("body"),null)},setUnselectable:function(e,i){e.attr("unselectable")!=i&&(e.attr("unselectable",i),e.find(":not(input)").attr("unselectable",i))},mouseMoveScroll:function(e){if(this.mouseMoveScrolling){var i=this.sizing.mouseDelta(this.scrollEvent,e);this.scrollThumbBy(i),this.setScrollEvent(e)}},startTouchScrolling:function(e){e.touches&&1==e.touches.length&&(this.setScrollEvent(e.touches[0]),this.touchScrolling=!0,e.stopPropagation())},touchScroll:function(e){if(this.touchScrolling&&e.touches&&1==e.touches.length){var i=-this.sizing.mouseDelta(this.scrollEvent,e.touches[0])*this.scrollable.options.swipeSpeed,t=this.scrollOverviewBy(i);t&&this.setScrollEvent(e.touches[0]),this.stopEventConditionally(e,t)}},stopTouchScrolling:function(e){this.touchScrolling=!1,e.stopPropagation()},mouseWheelScroll:function(e,i){var t=-this.sizing.wheelDelta(e,i)*this.scrollable.options.wheelSpeed;if(0!=t)return this.scrollOverviewBy(t)},mouseClickScroll:function(e){var i=this.viewPortSize-20;e["page"+this.sizing.scrollAxis()]<this.$thumb.offset()[this.sizing.offsetComponent()]&&(i=-i),this.scrollOverviewBy(i)},keyScroll:function(e){var i=e.which;if(this.enabled&&this.isKeyScrolling(i)){var t=this.scrollOverviewBy(this.keyScrollDelta(i));this.stopEventConditionally(e,t)}},scrollThumbBy:function(e){var i=this.thumbPosition();i+=e,i=this.positionOrMax(i,this.maxThumbPosition);var t=this.scrollPercent;if(this.scrollPercent=i/this.maxThumbPosition,t!=this.scrollPercent){var o=i*this.maxOverviewPosition/this.maxThumbPosition;return this.setScrollPosition(o,i),this.triggerCustomScroll(t),!0}return!1},thumbPosition:function(){return this.$thumb.position()[this.sizing.offsetComponent()]},scrollOverviewBy:function(e){var i=this.overviewPosition()+e;return this.scrollOverviewTo(i,!1)},overviewPosition:function(){return-this.scrollable.$overview.position()[this.sizing.offsetComponent()]},scrollOverviewTo:function(e,i){e=this.positionOrMax(e,this.maxOverviewPosition);var t=this.scrollPercent;if(this.scrollPercent=e/this.maxOverviewPosition,t!=this.scrollPercent){var o=this.scrollPercent*this.maxThumbPosition;return i?this.setScrollPositionWithAnimation(e,o):this.setScrollPosition(e,o),this.triggerCustomScroll(t),!0}return!1},positionOrMax:function(e,i){return e<0?0:e>i?i:e},triggerCustomScroll:function(e){this.scrollable.$element.trigger("customScroll",{scrollAxis:this.sizing.scrollAxis(),direction:this.sizing.scrollDirection(e,this.scrollPercent),scrollPercent:100*this.scrollPercent})},rescroll:function(e){if(e){var i=this.positionOrMax(this.overviewPosition(),this.maxOverviewPosition);this.scrollPercent=i/this.maxOverviewPosition;var t=this.scrollPercent*this.maxThumbPosition;this.setScrollPosition(i,t)}else{var t=this.scrollPercent*this.maxThumbPosition,i=this.scrollPercent*this.maxOverviewPosition;this.setScrollPosition(i,t)}},setScrollPosition:function(e,i){this.$thumb.css(this.sizing.offsetComponent(),i+"px"),this.scrollable.$overview.css(this.sizing.offsetComponent(),-e+"px")},setScrollPositionWithAnimation:function(e,i){var t={},o={};t[this.sizing.offsetComponent()]=i+"px",this.$thumb.animate(t,this.scrollable.options.animationSpeed),o[this.sizing.offsetComponent()]=-e+"px",this.scrollable.$overview.animate(o,this.scrollable.options.animationSpeed)},calculateMaxThumbPosition:function(){return Math.max(0,this.sizing.size(this.$scrollBar)-this.thumbSize)},calculateMaxOverviewPosition:function(){return Math.max(0,this.sizing.size(this.scrollable.$overview)-this.sizing.size(this.scrollable.$viewPort))},setScrollEvent:function(e){var i="page"+this.sizing.scrollAxis();this.scrollEvent&&this.scrollEvent[i]==e[i]||(this.scrollEvent={pageX:e.pageX,pageY:e.pageY})},scrollToElement:function(i){var t=e(i);if(this.sizing.isInside(t,this.scrollable.$overview)&&!this.sizing.isInside(t,this.scrollable.$viewPort)){var o=t.offset(),s=this.scrollable.$overview.offset();this.scrollable.$viewPort.offset();this.scrollOverviewTo(o[this.sizing.offsetComponent()]-s[this.sizing.offsetComponent()],!0)}},remove:function(){this.removeMouseMoveScrolling(),this.removeMouseWheelScrolling(),this.removeTouchScrolling(),this.removeMouseClickScrolling(),this.removeWindowResize()},stopEventConditionally:function(e,i){(i||this.scrollable.options.preventDefaultScroll)&&(e.preventDefault(),e.stopPropagation())}};var l=function(){};l.prototype={size:function(e,i){return i?e.width(i):e.width()},minSize:function(e){return parseInt(e.css("min-width"))||0},maxSize:function(e){return parseInt(e.css("max-width"))||0},fixedThumbSize:function(e){return e.fixedThumbWidth},scrollBar:function(e){return e.find(".scroll-bar.horizontal")},mouseDelta:function(e,i){return i.pageX-e.pageX},offsetComponent:function(){return"left"},wheelDelta:function(e,i){return e},scrollAxis:function(){return"X"},scrollDirection:function(e,i){return e<i?"right":"left"},scrollingKeys:{37:function(e){return-10},39:function(e){return 10}},isInside:function(i,t){var o=e(i),s=e(t),n=o.offset(),l=s.offset();return n.left>=l.left&&n.left+o.width()<=l.left+s.width()}};var r=function(){};return r.prototype={size:function(e,i){return i?e.height(i):e.height()},minSize:function(e){return parseInt(e.css("min-height"))||0},maxSize:function(e){return parseInt(e.css("max-height"))||0},fixedThumbSize:function(e){return e.fixedThumbHeight},scrollBar:function(e){return e.find(".scroll-bar.vertical")},mouseDelta:function(e,i){return i.pageY-e.pageY},offsetComponent:function(){return"top"},wheelDelta:function(e,i){return i},scrollAxis:function(){return"Y"},scrollDirection:function(e,i){return e<i?"down":"up"},scrollingKeys:{38:function(e){return-10},40:function(e){return 10},33:function(e){return-(e-20)},34:function(e){return e-20}},isInside:function(i,t){var o=e(i),s=e(t),n=o.offset(),l=s.offset();return n.top>=l.top&&n.top+o.height()<=l.top+s.height()}},this.each(function(){if(void 0==i&&(i=o),"string"==typeof i){var n=e(this).data("scrollable");n&&n[i](t)}else{if("object"!=typeof i)throw"Invalid type of options";i=e.extend(o,i),new s(e(this),i)}})}}(jQuery),function(e){function i(i){var t=i||window.event,o=[].slice.call(arguments,1),s=0,n=0,l=0;return i=e.event.fix(t),i.type="mousewheel",t.wheelDelta&&(s=t.wheelDelta/120),t.detail&&(s=-t.detail/3),l=s,void 0!==t.axis&&t.axis===t.HORIZONTAL_AXIS&&(l=0,n=s),void 0!==t.wheelDeltaY&&(l=t.wheelDeltaY/120),void 0!==t.wheelDeltaX&&(n=t.wheelDeltaX/120),o.unshift(i,s,n,l),(e.event.dispatch||e.event.handle).apply(this,o)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var o=t.length;o;)e.event.fixHooks[t[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],i,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9qcXVlcnkuY3VzdG9tLXNjcm9sbGJhci5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJjdXN0b21TY3JvbGxiYXIiLCJvcHRpb25zIiwiYXJncyIsImRlZmF1bHRPcHRpb25zIiwic2tpbiIsInVuZGVmaW5lZCIsImhTY3JvbGwiLCJ2U2Nyb2xsIiwidXBkYXRlT25XaW5kb3dSZXNpemUiLCJhbmltYXRpb25TcGVlZCIsIm9uQ3VzdG9tU2Nyb2xsIiwic3dpcGVTcGVlZCIsIndoZWVsU3BlZWQiLCJmaXhlZFRodW1iV2lkdGgiLCJmaXhlZFRodW1iSGVpZ2h0IiwicHJldmVudERlZmF1bHRTY3JvbGwiLCJTY3JvbGxhYmxlIiwiZWxlbWVudCIsInRoaXMiLCIkZWxlbWVudCIsImFkZFNjcm9sbGFibGVDbGFzcyIsImFkZFNraW5DbGFzcyIsImFkZFNjcm9sbEJhckNvbXBvbmVudHMiLCJ2U2Nyb2xsYmFyIiwiU2Nyb2xsYmFyIiwiVlNpemluZyIsImhTY3JvbGxiYXIiLCJIU2l6aW5nIiwiZGF0YSIsImluaXRLZXlib2FyZFNjcm9sbGluZyIsImJpbmRFdmVudHMiLCJwcm90b3R5cGUiLCJoYXNDbGFzcyIsInNjcm9sbGFibGVBZGRlZCIsImFkZENsYXNzIiwicmVtb3ZlU2Nyb2xsYWJsZUNsYXNzIiwicmVtb3ZlQ2xhc3MiLCJza2luQ2xhc3NBZGRlZCIsInJlbW92ZVNraW5DbGFzcyIsImFzc2lnblZpZXdQb3J0IiwiJHZpZXdQb3J0IiwibGVuZ3RoIiwid3JhcElubmVyIiwidmlld1BvcnRBZGRlZCIsImFzc2lnbk92ZXJ2aWV3IiwiJG92ZXJ2aWV3Iiwib3ZlcnZpZXdBZGRlZCIsImFkZFNjcm9sbEJhciIsInJlbW92ZVNjcm9sbGJhckNvbXBvbmVudHMiLCJyZW1vdmVTY3JvbGxiYXIiLCJ1bndyYXAiLCJvcmllbnRhdGlvbiIsImZpbmQiLCJyZW1vdmUiLCJmdW4iLCJyZXNpemUiLCJrZWVwUG9zaXRpb24iLCJzY3JvbGxUbyIsInNjcm9sbFRvRWxlbWVudCIsInNjcm9sbFRvWFkiLCJ4IiwieSIsInNjcm9sbFRvWCIsInNjcm9sbFRvWSIsInNjcm9sbE92ZXJ2aWV3VG8iLCJzY3JvbGxCeVgiLCJvdmVydmlld1Bvc2l0aW9uIiwic2Nyb2xsQnlZIiwicmVtb3ZlS2V5Ym9hcmRTY3JvbGxpbmciLCJzZXRBbmltYXRpb25TcGVlZCIsInNwZWVkIiwiaXNJbnNpZGUiLCJ3cmFwcGluZ0VsZW1lbnQiLCIkd3JhcHBpbmdFbGVtZW50IiwiZWxlbWVudE9mZnNldCIsIm9mZnNldCIsIndyYXBwaW5nRWxlbWVudE9mZnNldCIsInRvcCIsImxlZnQiLCJoZWlnaHQiLCJ3aWR0aCIsIl90aGlzIiwiZWxlbWVudEtleWRvd24iLCJldmVudCIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsImtleVNjcm9sbCIsImF0dHIiLCJrZXlkb3duIiwicmVtb3ZlQXR0ciIsInVuYmluZCIsIm9uIiwic2Nyb2xsYWJsZSIsInNpemluZyIsIiRzY3JvbGxCYXIiLCJzY3JvbGxCYXIiLCIkdGh1bWIiLCJzZXRTY3JvbGxQb3NpdGlvbiIsImluaXRNb3VzZU1vdmVTY3JvbGxpbmciLCJpbml0TW91c2VXaGVlbFNjcm9sbGluZyIsImluaXRUb3VjaFNjcm9sbGluZyIsImluaXRNb3VzZUNsaWNrU2Nyb2xsaW5nIiwiaW5pdFdpbmRvd1Jlc2l6ZSIsIm92ZXJ2aWV3U2l6ZSIsInNpemUiLCJjYWxjdWxhdGVWaWV3UG9ydFNpemUiLCJ2aWV3UG9ydFNpemUiLCJyYXRpbyIsInRodW1iU2l6ZSIsImNhbGN1bGF0ZVRodW1iU2l6ZSIsIm1heFRodW1iUG9zaXRpb24iLCJjYWxjdWxhdGVNYXhUaHVtYlBvc2l0aW9uIiwibWF4T3ZlcnZpZXdQb3NpdGlvbiIsImNhbGN1bGF0ZU1heE92ZXJ2aWV3UG9zaXRpb24iLCJlbmFibGVkIiwic2Nyb2xsUGVyY2VudCIsInJlc2Nyb2xsIiwidG9nZ2xlIiwiZWxlbWVudFNpemUiLCJtYXhTaXplVXNlZCIsIm1heFNpemUiLCJNYXRoIiwibWluIiwiZml4ZWRTaXplIiwiZml4ZWRUaHVtYlNpemUiLCJtYXgiLCJtaW5TaXplIiwibW91c2Vkb3duIiwic3RhcnRNb3VzZU1vdmVTY3JvbGxpbmciLCJkb2N1bWVudE1vdXNldXAiLCJzdG9wTW91c2VNb3ZlU2Nyb2xsaW5nIiwibW91c2V1cCIsImRvY3VtZW50TW91c2Vtb3ZlIiwibW91c2VNb3ZlU2Nyb2xsIiwibW91c2Vtb3ZlIiwiY2xpY2siLCJzdG9wUHJvcGFnYXRpb24iLCJyZW1vdmVNb3VzZU1vdmVTY3JvbGxpbmciLCJtb3VzZXdoZWVsIiwiZGVsdGEiLCJkZWx0YVgiLCJkZWx0YVkiLCJzY3JvbGxlZCIsIm1vdXNlV2hlZWxTY3JvbGwiLCJzdG9wRXZlbnRDb25kaXRpb25hbGx5IiwicmVtb3ZlTW91c2VXaGVlbFNjcm9sbGluZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbGVtZW50VG91Y2hzdGFydCIsInN0YXJ0VG91Y2hTY3JvbGxpbmciLCJkb2N1bWVudFRvdWNobW92ZSIsInRvdWNoU2Nyb2xsIiwiZWxlbWVudFRvdWNoZW5kIiwic3RvcFRvdWNoU2Nyb2xsaW5nIiwicmVtb3ZlVG91Y2hTY3JvbGxpbmciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2Nyb2xsQmFyQ2xpY2siLCJtb3VzZUNsaWNrU2Nyb2xsIiwicmVtb3ZlTW91c2VDbGlja1Njcm9sbGluZyIsIndpbmRvd1Jlc2l6ZSIsIndpbmRvdyIsInJlbW92ZVdpbmRvd1Jlc2l6ZSIsImlzS2V5U2Nyb2xsaW5nIiwia2V5Iiwia2V5U2Nyb2xsRGVsdGEiLCJzY3JvbGxpbmdLZXkiLCJzY3JvbGxpbmdLZXlzIiwibW91c2VNb3ZlU2Nyb2xsaW5nIiwic2V0VW5zZWxlY3RhYmxlIiwic2V0U2Nyb2xsRXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwibW91c2VEZWx0YSIsInNjcm9sbEV2ZW50Iiwic2Nyb2xsVGh1bWJCeSIsInRvdWNoZXMiLCJ0b3VjaFNjcm9sbGluZyIsInNjcm9sbE92ZXJ2aWV3QnkiLCJ3aGVlbERlbHRhIiwic2Nyb2xsQXhpcyIsIm9mZnNldENvbXBvbmVudCIsImtleURvd24iLCJ3aGljaCIsInRodW1iUG9zaXRpb24iLCJwb3NpdGlvbk9yTWF4Iiwib2xkU2Nyb2xsUGVyY2VudCIsInRyaWdnZXJDdXN0b21TY3JvbGwiLCJwb3NpdGlvbiIsImFuaW1hdGUiLCJzZXRTY3JvbGxQb3NpdGlvbldpdGhBbmltYXRpb24iLCJwIiwidHJpZ2dlciIsImRpcmVjdGlvbiIsInNjcm9sbERpcmVjdGlvbiIsImNzcyIsInRodW1iQW5pbWF0aW9uT3B0cyIsIm92ZXJ2aWV3QW5pbWF0aW9uT3B0cyIsInBhZ2VYIiwicGFnZVkiLCJvdmVydmlld09mZnNldCIsImNvbmRpdGlvbiIsIiRlbCIsImFyZyIsInBhcnNlSW50IiwiZXZlbnQxIiwiZXZlbnQyIiwib2xkUGVyY2VudCIsIm5ld1BlcmNlbnQiLCIzNyIsIjM5IiwiMzgiLCI0MCIsIjMzIiwiMzQiLCJlYWNoIiwiZXh0ZW5kIiwialF1ZXJ5IiwiaGFuZGxlciIsIm9yZ0V2ZW50Iiwic2xpY2UiLCJjYWxsIiwiYXJndW1lbnRzIiwiZml4IiwidHlwZSIsImRldGFpbCIsImF4aXMiLCJIT1JJWk9OVEFMX0FYSVMiLCJ3aGVlbERlbHRhWSIsIndoZWVsRGVsdGFYIiwidW5zaGlmdCIsImRpc3BhdGNoIiwiaGFuZGxlIiwiYXBwbHkiLCJ0eXBlcyIsImZpeEhvb2tzIiwiaSIsIm1vdXNlSG9va3MiLCJzcGVjaWFsIiwic2V0dXAiLCJvbm1vdXNld2hlZWwiLCJ0ZWFyZG93biIsImJpbmQiLCJ1bm1vdXNld2hlZWwiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVdBLEdBRVRBLEVBQUVDLEdBQUdDLGdCQUFrQixTQUFVQyxFQUFTQyxHQUV4QyxHQUFJQyxJQUNGQyxTQUFNQyxHQUNOQyxTQUFTLEVBQ1RDLFNBQVMsRUFDVEMsc0JBQXNCLEVBQ3RCQyxlQUFnQixJQUNoQkMsbUJBQWdCTCxHQUNoQk0sV0FBWSxFQUNaQyxXQUFZLEdBQ1pDLG9CQUFpQlIsR0FDakJT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aU0sR0FDekI1TyxFQUFFcUYsTUFBTXNKLFNBQVVELElBQVFFLElBQU81TyxFQUFFcUYsTUFBTXdKLFVBSTdDN08sR0FBRXFGLE1BQU15SixRQUFRbEcsWUFDZG1HLE1BQU8sV0FDTCxHQUFJM04sS0FBS2dJLGlCQUNQLElBQUssR0FBSXdGLEdBQUlGLEVBQU0vTCxPQUFRaU0sR0FDekJ4TixLQUFLZ0ksaUJBQWlCc0YsSUFBUUUsR0FBSWxCLEdBQVMsT0FHN0N0TSxNQUFLNE4sYUFBZXRCLEdBSXhCdUIsU0FBVSxXQUNSLEdBQUk3TixLQUFLd0ksb0JBQ1AsSUFBSyxHQUFJZ0YsR0FBSUYsRUFBTS9MLE9BQVFpTSxHQUN6QnhOLEtBQUt3SSxvQkFBb0I4RSxJQUFRRSxHQUFJbEIsR0FBUyxPQUdoRHRNLE1BQUs0TixhQUFlLE9BSzFCaFAsRUFBRUMsR0FBR3VOLFFBQ0g1RSxXQUFZLFNBQVUzSSxHQUNwQixNQUFPQSxHQUFLbUIsS0FBSzhOLEtBQUssYUFBY2pQLEdBQU1tQixLQUFLNEssUUFBUSxlQUd6RG1ELGFBQWMsU0FBVWxQLEdBQ3RCLE1BQU9tQixNQUFLd0UsT0FBTyxhQUFjM0YsT0F5Q3BDd04iLCJmaWxlIjoibGliL2pxdWVyeS5jdXN0b20tc2Nyb2xsYmFyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkKSB7XG5cbiAgJC5mbi5jdXN0b21TY3JvbGxiYXIgPSBmdW5jdGlvbiAob3B0aW9ucywgYXJncykge1xuXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgc2tpbjogdW5kZWZpbmVkLFxuICAgICAgaFNjcm9sbDogdHJ1ZSxcbiAgICAgIHZTY3JvbGw6IHRydWUsXG4gICAgICB1cGRhdGVPbldpbmRvd1Jlc2l6ZTogZmFsc2UsXG4gICAgICBhbmltYXRpb25TcGVlZDogMzAwLFxuICAgICAgb25DdXN0b21TY3JvbGw6IHVuZGVmaW5lZCxcbiAgICAgIHN3aXBlU3BlZWQ6IDEsXG4gICAgICB3aGVlbFNwZWVkOiA0MCxcbiAgICAgIGZpeGVkVGh1bWJXaWR0aDogdW5kZWZpbmVkLFxuICAgICAgZml4ZWRUaHVtYkhlaWdodDogdW5kZWZpbmVkLFxuICAgICAgcHJldmVudERlZmF1bHRTY3JvbGw6IGZhbHNlXG4gICAgfVxuXG4gICAgdmFyIFNjcm9sbGFibGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgdGhpcy5hZGRTY3JvbGxhYmxlQ2xhc3MoKTtcbiAgICAgIHRoaXMuYWRkU2tpbkNsYXNzKCk7XG4gICAgICB0aGlzLmFkZFNjcm9sbEJhckNvbXBvbmVudHMoKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudlNjcm9sbClcbiAgICAgICAgdGhpcy52U2Nyb2xsYmFyID0gbmV3IFNjcm9sbGJhcih0aGlzLCBuZXcgVlNpemluZygpKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaFNjcm9sbClcbiAgICAgICAgdGhpcy5oU2Nyb2xsYmFyID0gbmV3IFNjcm9sbGJhcih0aGlzLCBuZXcgSFNpemluZygpKTtcbiAgICAgIHRoaXMuJGVsZW1lbnQuZGF0YShcInNjcm9sbGFibGVcIiwgdGhpcyk7XG4gICAgICB0aGlzLmluaXRLZXlib2FyZFNjcm9sbGluZygpO1xuICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgU2Nyb2xsYWJsZS5wcm90b3R5cGUgPSB7XG5cbiAgICAgIGFkZFNjcm9sbGFibGVDbGFzczogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJzY3JvbGxhYmxlXCIpKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxhYmxlQWRkZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJzY3JvbGxhYmxlXCIpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICByZW1vdmVTY3JvbGxhYmxlQ2xhc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsYWJsZUFkZGVkKVxuICAgICAgICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJzY3JvbGxhYmxlXCIpO1xuICAgICAgfSxcblxuICAgICAgYWRkU2tpbkNsYXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YodGhpcy5vcHRpb25zLnNraW4pID09IFwic3RyaW5nXCIgJiYgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3ModGhpcy5vcHRpb25zLnNraW4pKSB7XG4gICAgICAgICAgdGhpcy5za2luQ2xhc3NBZGRlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuc2tpbik7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZVNraW5DbGFzczogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5za2luQ2xhc3NBZGRlZClcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5za2luKTtcbiAgICAgIH0sXG5cbiAgICAgIGFkZFNjcm9sbEJhckNvbXBvbmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hc3NpZ25WaWV3UG9ydCgpO1xuICAgICAgICBpZiAodGhpcy4kdmlld1BvcnQubGVuZ3RoID09IDApIHtcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LndyYXBJbm5lcihcIjxkaXYgY2xhc3M9XFxcInZpZXdwb3J0XFxcIiAvPlwiKTtcbiAgICAgICAgICB0aGlzLmFzc2lnblZpZXdQb3J0KCk7XG4gICAgICAgICAgdGhpcy52aWV3UG9ydEFkZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFzc2lnbk92ZXJ2aWV3KCk7XG4gICAgICAgIGlmICh0aGlzLiRvdmVydmlldy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIHRoaXMuJHZpZXdQb3J0LndyYXBJbm5lcihcIjxkaXYgY2xhc3M9XFxcIm92ZXJ2aWV3XFxcIiAvPlwiKTtcbiAgICAgICAgICB0aGlzLmFzc2lnbk92ZXJ2aWV3KCk7XG4gICAgICAgICAgdGhpcy5vdmVydmlld0FkZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFNjcm9sbEJhcihcInZlcnRpY2FsXCIsIFwicHJlcGVuZFwiKTtcbiAgICAgICAgdGhpcy5hZGRTY3JvbGxCYXIoXCJob3Jpem9udGFsXCIsIFwiYXBwZW5kXCIpO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlU2Nyb2xsYmFyQ29tcG9uZW50czogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbW92ZVNjcm9sbGJhcihcInZlcnRpY2FsXCIpO1xuICAgICAgICB0aGlzLnJlbW92ZVNjcm9sbGJhcihcImhvcml6b250YWxcIik7XG4gICAgICAgIGlmICh0aGlzLm92ZXJ2aWV3QWRkZWQpXG4gICAgICAgICAgdGhpcy4kZWxlbWVudC51bndyYXAoKTtcbiAgICAgICAgaWYgKHRoaXMudmlld1BvcnRBZGRlZClcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LnVud3JhcCgpO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlU2Nyb2xsYmFyOiBmdW5jdGlvbiAob3JpZW50YXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXNbb3JpZW50YXRpb24gKyBcIlNjcm9sbGJhckFkZGVkXCJdKVxuICAgICAgICAgIHRoaXMuJGVsZW1lbnQuZmluZChcIi5zY3JvbGwtYmFyLlwiICsgb3JpZW50YXRpb24pLnJlbW92ZSgpO1xuICAgICAgfSxcblxuICAgICAgYXNzaWduVmlld1BvcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy4kdmlld1BvcnQgPSB0aGlzLiRlbGVtZW50LmZpbmQoXCIudmlld3BvcnRcIik7XG4gICAgICB9LFxuXG4gICAgICBhc3NpZ25PdmVydmlldzogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLiRvdmVydmlldyA9IHRoaXMuJHZpZXdQb3J0LmZpbmQoXCIub3ZlcnZpZXdcIik7XG4gICAgICB9LFxuXG4gICAgICBhZGRTY3JvbGxCYXI6IGZ1bmN0aW9uIChvcmllbnRhdGlvbiwgZnVuKSB7XG4gICAgICAgIGlmICh0aGlzLiRlbGVtZW50LmZpbmQoXCIuc2Nyb2xsLWJhci5cIiArIG9yaWVudGF0aW9uKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIHRoaXMuJGVsZW1lbnRbZnVuXShcIjxkaXYgY2xhc3M9J3Njcm9sbC1iYXIgXCIgKyBvcmllbnRhdGlvbiArIFwiJz48ZGl2IGNsYXNzPSd0aHVtYic+PC9kaXY+PC9kaXY+XCIpXG4gICAgICAgICAgdGhpc1tvcmllbnRhdGlvbiArIFwiU2Nyb2xsYmFyQWRkZWRcIl0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICByZXNpemU6IGZ1bmN0aW9uIChrZWVwUG9zaXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMudlNjcm9sbGJhcilcbiAgICAgICAgICB0aGlzLnZTY3JvbGxiYXIucmVzaXplKGtlZXBQb3NpdGlvbik7XG4gICAgICAgIGlmICh0aGlzLmhTY3JvbGxiYXIpXG4gICAgICAgICAgdGhpcy5oU2Nyb2xsYmFyLnJlc2l6ZShrZWVwUG9zaXRpb24pO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsVG86IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnZTY3JvbGxiYXIpXG4gICAgICAgICAgdGhpcy52U2Nyb2xsYmFyLnNjcm9sbFRvRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgaWYgKHRoaXMuaFNjcm9sbGJhcilcbiAgICAgICAgICB0aGlzLmhTY3JvbGxiYXIuc2Nyb2xsVG9FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsVG9YWTogZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxUb1goeCk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9ZKHkpO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsVG9YOiBmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAodGhpcy5oU2Nyb2xsYmFyKVxuICAgICAgICAgIHRoaXMuaFNjcm9sbGJhci5zY3JvbGxPdmVydmlld1RvKHgsIHRydWUpO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsVG9ZOiBmdW5jdGlvbiAoeSkge1xuICAgICAgICBpZiAodGhpcy52U2Nyb2xsYmFyKVxuICAgICAgICAgIHRoaXMudlNjcm9sbGJhci5zY3JvbGxPdmVydmlld1RvKHksIHRydWUpO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsQnlYOiBmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAodGhpcy5oU2Nyb2xsYmFyKVxuICAgICAgICAgIHRoaXMuc2Nyb2xsVG9YKHRoaXMuaFNjcm9sbGJhci5vdmVydmlld1Bvc2l0aW9uKCkgKyB4KTtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbEJ5WTogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgaWYgKHRoaXMudlNjcm9sbGJhcilcbiAgICAgICAgICB0aGlzLnNjcm9sbFRvWSh0aGlzLnZTY3JvbGxiYXIub3ZlcnZpZXdQb3NpdGlvbigpICsgeSk7XG4gICAgICB9LFxuXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTY3JvbGxhYmxlQ2xhc3MoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVTa2luQ2xhc3MoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVTY3JvbGxiYXJDb21wb25lbnRzKCk7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQuZGF0YShcInNjcm9sbGFibGVcIiwgbnVsbCk7XG4gICAgICAgIHRoaXMucmVtb3ZlS2V5Ym9hcmRTY3JvbGxpbmcoKTtcbiAgICAgICAgaWYgKHRoaXMudlNjcm9sbGJhcilcbiAgICAgICAgICB0aGlzLnZTY3JvbGxiYXIucmVtb3ZlKCk7XG4gICAgICAgIGlmICh0aGlzLmhTY3JvbGxiYXIpXG4gICAgICAgICAgdGhpcy5oU2Nyb2xsYmFyLnJlbW92ZSgpO1xuICAgICAgfSxcblxuICAgICAgc2V0QW5pbWF0aW9uU3BlZWQ6IGZ1bmN0aW9uIChzcGVlZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uU3BlZWQgPSBzcGVlZDtcbiAgICAgIH0sXG5cbiAgICAgIGlzSW5zaWRlOiBmdW5jdGlvbiAoZWxlbWVudCwgd3JhcHBpbmdFbGVtZW50KSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gICAgICAgIHZhciAkd3JhcHBpbmdFbGVtZW50ID0gJCh3cmFwcGluZ0VsZW1lbnQpO1xuICAgICAgICB2YXIgZWxlbWVudE9mZnNldCA9ICRlbGVtZW50Lm9mZnNldCgpO1xuICAgICAgICB2YXIgd3JhcHBpbmdFbGVtZW50T2Zmc2V0ID0gJHdyYXBwaW5nRWxlbWVudC5vZmZzZXQoKTtcbiAgICAgICAgcmV0dXJuIChlbGVtZW50T2Zmc2V0LnRvcCA+PSB3cmFwcGluZ0VsZW1lbnRPZmZzZXQudG9wKSAmJiAoZWxlbWVudE9mZnNldC5sZWZ0ID49IHdyYXBwaW5nRWxlbWVudE9mZnNldC5sZWZ0KSAmJlxuICAgICAgICAgIChlbGVtZW50T2Zmc2V0LnRvcCArICRlbGVtZW50LmhlaWdodCgpIDw9IHdyYXBwaW5nRWxlbWVudE9mZnNldC50b3AgKyAkd3JhcHBpbmdFbGVtZW50LmhlaWdodCgpKSAmJlxuICAgICAgICAgIChlbGVtZW50T2Zmc2V0LmxlZnQgKyAkZWxlbWVudC53aWR0aCgpIDw9IHdyYXBwaW5nRWxlbWVudE9mZnNldC5sZWZ0ICsgJHdyYXBwaW5nRWxlbWVudC53aWR0aCgpKVxuICAgICAgfSxcblxuICAgICAgaW5pdEtleWJvYXJkU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5lbGVtZW50S2V5ZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBfdGhpcy4kZWxlbWVudFswXSkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnZTY3JvbGxiYXIpXG4gICAgICAgICAgICAgIF90aGlzLnZTY3JvbGxiYXIua2V5U2Nyb2xsKGV2ZW50KTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5oU2Nyb2xsYmFyKVxuICAgICAgICAgICAgICBfdGhpcy5oU2Nyb2xsYmFyLmtleVNjcm9sbChldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kZWxlbWVudFxuICAgICAgICAgIC5hdHRyKCd0YWJpbmRleCcsICctMScpXG4gICAgICAgICAgLmtleWRvd24odGhpcy5lbGVtZW50S2V5ZG93bik7XG4gICAgICB9LFxuXG4gICAgICByZW1vdmVLZXlib2FyZFNjcm9sbGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLiRlbGVtZW50XG4gICAgICAgICAgLnJlbW92ZUF0dHIoJ3RhYmluZGV4JylcbiAgICAgICAgICAudW5iaW5kKFwia2V5ZG93blwiLCB0aGlzLmVsZW1lbnRLZXlkb3duKTtcbiAgICAgIH0sXG5cbiAgICAgIGJpbmRFdmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5vbkN1c3RvbVNjcm9sbClcbiAgICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKFwiY3VzdG9tU2Nyb2xsXCIsIHRoaXMub3B0aW9ucy5vbkN1c3RvbVNjcm9sbCk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICB2YXIgU2Nyb2xsYmFyID0gZnVuY3Rpb24gKHNjcm9sbGFibGUsIHNpemluZykge1xuICAgICAgdGhpcy5zY3JvbGxhYmxlID0gc2Nyb2xsYWJsZTtcbiAgICAgIHRoaXMuc2l6aW5nID0gc2l6aW5nXG4gICAgICB0aGlzLiRzY3JvbGxCYXIgPSB0aGlzLnNpemluZy5zY3JvbGxCYXIodGhpcy5zY3JvbGxhYmxlLiRlbGVtZW50KTtcbiAgICAgIHRoaXMuJHRodW1iID0gdGhpcy4kc2Nyb2xsQmFyLmZpbmQoXCIudGh1bWJcIik7XG4gICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKDAsIDApO1xuICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICAgIHRoaXMuaW5pdE1vdXNlTW92ZVNjcm9sbGluZygpO1xuICAgICAgdGhpcy5pbml0TW91c2VXaGVlbFNjcm9sbGluZygpO1xuICAgICAgdGhpcy5pbml0VG91Y2hTY3JvbGxpbmcoKTtcbiAgICAgIHRoaXMuaW5pdE1vdXNlQ2xpY2tTY3JvbGxpbmcoKTtcbiAgICAgIHRoaXMuaW5pdFdpbmRvd1Jlc2l6ZSgpO1xuICAgIH1cblxuICAgIFNjcm9sbGJhci5wcm90b3R5cGUgPSB7XG5cbiAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKGtlZXBQb3NpdGlvbikge1xuICAgICAgICB0aGlzLm92ZXJ2aWV3U2l6ZSA9IHRoaXMuc2l6aW5nLnNpemUodGhpcy5zY3JvbGxhYmxlLiRvdmVydmlldyk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVmlld1BvcnRTaXplKCk7XG4gICAgICAgIHRoaXMuc2l6aW5nLnNpemUodGhpcy5zY3JvbGxhYmxlLiR2aWV3UG9ydCwgdGhpcy52aWV3UG9ydFNpemUpO1xuICAgICAgICB0aGlzLnJhdGlvID0gdGhpcy52aWV3UG9ydFNpemUgLyB0aGlzLm92ZXJ2aWV3U2l6ZTtcbiAgICAgICAgdGhpcy5zaXppbmcuc2l6ZSh0aGlzLiRzY3JvbGxCYXIsIHRoaXMudmlld1BvcnRTaXplKTtcbiAgICAgICAgdGhpcy50aHVtYlNpemUgPSB0aGlzLmNhbGN1bGF0ZVRodW1iU2l6ZSgpO1xuICAgICAgICB0aGlzLnNpemluZy5zaXplKHRoaXMuJHRodW1iLCB0aGlzLnRodW1iU2l6ZSk7XG4gICAgICAgIHRoaXMubWF4VGh1bWJQb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlTWF4VGh1bWJQb3NpdGlvbigpO1xuICAgICAgICB0aGlzLm1heE92ZXJ2aWV3UG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZU1heE92ZXJ2aWV3UG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gKHRoaXMub3ZlcnZpZXdTaXplID4gdGhpcy52aWV3UG9ydFNpemUpO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxQZXJjZW50ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5zY3JvbGxQZXJjZW50ID0gMC4wO1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkKVxuICAgICAgICAgIHRoaXMucmVzY3JvbGwoa2VlcFBvc2l0aW9uKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsUG9zaXRpb24oMCwgMCk7XG4gICAgICAgIHRoaXMuJHNjcm9sbEJhci50b2dnbGUodGhpcy5lbmFibGVkKTtcbiAgICAgIH0sXG5cbiAgICAgIGNhbGN1bGF0ZVZpZXdQb3J0U2l6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWxlbWVudFNpemUgPSB0aGlzLnNpemluZy5zaXplKHRoaXMuc2Nyb2xsYWJsZS4kZWxlbWVudCk7XG4gICAgICAgIGlmIChlbGVtZW50U2l6ZSA+IDAgJiYgIXRoaXMubWF4U2l6ZVVzZWQpIHtcbiAgICAgICAgICB0aGlzLnZpZXdQb3J0U2l6ZSA9IGVsZW1lbnRTaXplO1xuICAgICAgICAgIHRoaXMubWF4U2l6ZVVzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgbWF4U2l6ZSA9IHRoaXMuc2l6aW5nLm1heFNpemUodGhpcy5zY3JvbGxhYmxlLiRlbGVtZW50KTtcbiAgICAgICAgICB0aGlzLnZpZXdQb3J0U2l6ZSA9IE1hdGgubWluKG1heFNpemUsIHRoaXMub3ZlcnZpZXdTaXplKTtcbiAgICAgICAgICB0aGlzLm1heFNpemVVc2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgY2FsY3VsYXRlVGh1bWJTaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaXhlZFNpemUgPSB0aGlzLnNpemluZy5maXhlZFRodW1iU2l6ZSh0aGlzLnNjcm9sbGFibGUub3B0aW9ucylcbiAgICAgICAgdmFyIHNpemU7XG4gICAgICAgIGlmIChmaXhlZFNpemUpXG4gICAgICAgICAgc2l6ZSA9IGZpeGVkU2l6ZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHNpemUgPSB0aGlzLnJhdGlvICogdGhpcy52aWV3UG9ydFNpemVcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHNpemUsIHRoaXMuc2l6aW5nLm1pblNpemUodGhpcy4kdGh1bWIpKTtcbiAgICAgIH0sXG5cbiAgICAgIGluaXRNb3VzZU1vdmVTY3JvbGxpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy4kdGh1bWIubW91c2Vkb3duKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGlmIChfdGhpcy5lbmFibGVkKVxuICAgICAgICAgICAgX3RoaXMuc3RhcnRNb3VzZU1vdmVTY3JvbGxpbmcoZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kb2N1bWVudE1vdXNldXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBfdGhpcy5zdG9wTW91c2VNb3ZlU2Nyb2xsaW5nKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgJChkb2N1bWVudCkubW91c2V1cCh0aGlzLmRvY3VtZW50TW91c2V1cCk7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRNb3VzZW1vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBfdGhpcy5tb3VzZU1vdmVTY3JvbGwoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICAkKGRvY3VtZW50KS5tb3VzZW1vdmUodGhpcy5kb2N1bWVudE1vdXNlbW92ZSk7XG4gICAgICAgIHRoaXMuJHRodW1iLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZU1vdXNlTW92ZVNjcm9sbGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLiR0aHVtYi51bmJpbmQoKTtcbiAgICAgICAgJChkb2N1bWVudCkudW5iaW5kKFwibW91c2V1cFwiLCB0aGlzLmRvY3VtZW50TW91c2V1cCk7XG4gICAgICAgICQoZG9jdW1lbnQpLnVuYmluZChcIm1vdXNlbW92ZVwiLCB0aGlzLmRvY3VtZW50TW91c2Vtb3ZlKTtcbiAgICAgIH0sXG5cbiAgICAgIGluaXRNb3VzZVdoZWVsU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2Nyb2xsYWJsZS4kZWxlbWVudC5tb3VzZXdoZWVsKGZ1bmN0aW9uIChldmVudCwgZGVsdGEsIGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgICAgICAgaWYgKF90aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxlZCA9IF90aGlzLm1vdXNlV2hlZWxTY3JvbGwoZGVsdGFYLCBkZWx0YVkpO1xuICAgICAgICAgICAgX3RoaXMuc3RvcEV2ZW50Q29uZGl0aW9uYWxseShldmVudCwgc2Nyb2xsZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICByZW1vdmVNb3VzZVdoZWVsU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsYWJsZS4kZWxlbWVudC51bmJpbmQoXCJtb3VzZXdoZWVsXCIpO1xuICAgICAgfSxcblxuICAgICAgaW5pdFRvdWNoU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICB0aGlzLmVsZW1lbnRUb3VjaHN0YXJ0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMuZW5hYmxlZClcbiAgICAgICAgICAgICAgX3RoaXMuc3RhcnRUb3VjaFNjcm9sbGluZyhldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuc2Nyb2xsYWJsZS4kZWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLmVsZW1lbnRUb3VjaHN0YXJ0KTtcbiAgICAgICAgICB0aGlzLmRvY3VtZW50VG91Y2htb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy50b3VjaFNjcm9sbChldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuc2Nyb2xsYWJsZS4kZWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuZG9jdW1lbnRUb3VjaG1vdmUpO1xuICAgICAgICAgIHRoaXMuZWxlbWVudFRvdWNoZW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5zdG9wVG91Y2hTY3JvbGxpbmcoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuZWxlbWVudFRvdWNoZW5kKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgcmVtb3ZlVG91Y2hTY3JvbGxpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICB0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5lbGVtZW50VG91Y2hzdGFydCk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLmRvY3VtZW50VG91Y2htb3ZlKTtcbiAgICAgICAgICB0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuZWxlbWVudFRvdWNoZW5kKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgaW5pdE1vdXNlQ2xpY2tTY3JvbGxpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zY3JvbGxCYXJDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIF90aGlzLm1vdXNlQ2xpY2tTY3JvbGwoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLiRzY3JvbGxCYXIuY2xpY2sodGhpcy5zY3JvbGxCYXJDbGljayk7XG4gICAgICB9LFxuXG4gICAgICByZW1vdmVNb3VzZUNsaWNrU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuJHNjcm9sbEJhci51bmJpbmQoXCJjbGlja1wiLCB0aGlzLnNjcm9sbEJhckNsaWNrKTtcbiAgICAgIH0sXG5cbiAgICAgIGluaXRXaW5kb3dSZXNpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsYWJsZS5vcHRpb25zLnVwZGF0ZU9uV2luZG93UmVzaXplKSB7XG4gICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICB0aGlzLndpbmRvd1Jlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnJlc2l6ZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZSh0aGlzLndpbmRvd1Jlc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZVdpbmRvd1Jlc2l6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHdpbmRvdykudW5iaW5kKFwicmVzaXplXCIsIHRoaXMud2luZG93UmVzaXplKTtcbiAgICAgIH0sXG5cbiAgICAgIGlzS2V5U2Nyb2xsaW5nOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleVNjcm9sbERlbHRhKGtleSkgIT0gbnVsbDtcbiAgICAgIH0sXG5cbiAgICAgIGtleVNjcm9sbERlbHRhOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGZvciAodmFyIHNjcm9sbGluZ0tleSBpbiB0aGlzLnNpemluZy5zY3JvbGxpbmdLZXlzKVxuICAgICAgICAgIGlmIChzY3JvbGxpbmdLZXkgPT0ga2V5KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2l6aW5nLnNjcm9sbGluZ0tleXNba2V5XSh0aGlzLnZpZXdQb3J0U2l6ZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSxcblxuICAgICAgc3RhcnRNb3VzZU1vdmVTY3JvbGxpbmc6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLm1vdXNlTW92ZVNjcm9sbGluZyA9IHRydWU7XG4gICAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKFwibm90LXNlbGVjdGFibGVcIik7XG4gICAgICAgIHRoaXMuc2V0VW5zZWxlY3RhYmxlKCQoXCJib2R5XCIpLCBcIm9uXCIpO1xuICAgICAgICB0aGlzLnNldFNjcm9sbEV2ZW50KGV2ZW50KTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0sXG5cbiAgICAgIHN0b3BNb3VzZU1vdmVTY3JvbGxpbmc6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLm1vdXNlTW92ZVNjcm9sbGluZyA9IGZhbHNlO1xuICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcIm5vdC1zZWxlY3RhYmxlXCIpO1xuICAgICAgICB0aGlzLnNldFVuc2VsZWN0YWJsZSgkKFwiYm9keVwiKSwgbnVsbCk7XG4gICAgICB9LFxuXG4gICAgICBzZXRVbnNlbGVjdGFibGU6IGZ1bmN0aW9uIChlbGVtZW50LCB2YWx1ZSkge1xuICAgICAgICBpZiAoZWxlbWVudC5hdHRyKFwidW5zZWxlY3RhYmxlXCIpICE9IHZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC5hdHRyKFwidW5zZWxlY3RhYmxlXCIsIHZhbHVlKTtcbiAgICAgICAgICBlbGVtZW50LmZpbmQoJzpub3QoaW5wdXQpJykuYXR0cigndW5zZWxlY3RhYmxlJywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBtb3VzZU1vdmVTY3JvbGw6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAodGhpcy5tb3VzZU1vdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICB2YXIgZGVsdGEgPSB0aGlzLnNpemluZy5tb3VzZURlbHRhKHRoaXMuc2Nyb2xsRXZlbnQsIGV2ZW50KTtcbiAgICAgICAgICB0aGlzLnNjcm9sbFRodW1iQnkoZGVsdGEpO1xuICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsRXZlbnQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBzdGFydFRvdWNoU2Nyb2xsaW5nOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsRXZlbnQoZXZlbnQudG91Y2hlc1swXSk7XG4gICAgICAgICAgdGhpcy50b3VjaFNjcm9sbGluZyA9IHRydWU7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHRvdWNoU2Nyb2xsOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudG91Y2hTY3JvbGxpbmcgJiYgZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgdmFyIGRlbHRhID0gLXRoaXMuc2l6aW5nLm1vdXNlRGVsdGEodGhpcy5zY3JvbGxFdmVudCwgZXZlbnQudG91Y2hlc1swXSkgKiB0aGlzLnNjcm9sbGFibGUub3B0aW9ucy5zd2lwZVNwZWVkO1xuICAgICAgICAgIHZhciBzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsT3ZlcnZpZXdCeShkZWx0YSk7XG4gICAgICAgICAgaWYgKHNjcm9sbGVkKVxuICAgICAgICAgICAgdGhpcy5zZXRTY3JvbGxFdmVudChldmVudC50b3VjaGVzWzBdKTtcbiAgICAgICAgICB0aGlzLnN0b3BFdmVudENvbmRpdGlvbmFsbHkoZXZlbnQsIHNjcm9sbGVkKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgc3RvcFRvdWNoU2Nyb2xsaW5nOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy50b3VjaFNjcm9sbGluZyA9IGZhbHNlO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIG1vdXNlV2hlZWxTY3JvbGw6IGZ1bmN0aW9uIChkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICB2YXIgZGVsdGEgPSAtdGhpcy5zaXppbmcud2hlZWxEZWx0YShkZWx0YVgsIGRlbHRhWSkgKiB0aGlzLnNjcm9sbGFibGUub3B0aW9ucy53aGVlbFNwZWVkO1xuICAgICAgICBpZiAoZGVsdGEgIT0gMClcbiAgICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxPdmVydmlld0J5KGRlbHRhKTtcbiAgICAgIH0sXG5cbiAgICAgIG1vdXNlQ2xpY2tTY3JvbGw6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZGVsdGEgPSB0aGlzLnZpZXdQb3J0U2l6ZSAtIDIwO1xuICAgICAgICBpZiAoZXZlbnRbXCJwYWdlXCIgKyB0aGlzLnNpemluZy5zY3JvbGxBeGlzKCldIDwgdGhpcy4kdGh1bWIub2Zmc2V0KClbdGhpcy5zaXppbmcub2Zmc2V0Q29tcG9uZW50KCldKVxuICAgICAgICAvLyBtb3VzZSBjbGljayBvdmVyIHRodW1iXG4gICAgICAgICAgZGVsdGEgPSAtZGVsdGE7XG4gICAgICAgIHRoaXMuc2Nyb2xsT3ZlcnZpZXdCeShkZWx0YSk7XG4gICAgICB9LFxuXG4gICAgICBrZXlTY3JvbGw6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIga2V5RG93biA9IGV2ZW50LndoaWNoO1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkICYmIHRoaXMuaXNLZXlTY3JvbGxpbmcoa2V5RG93bikpIHtcbiAgICAgICAgICB2YXIgc2Nyb2xsZWQgPSB0aGlzLnNjcm9sbE92ZXJ2aWV3QnkodGhpcy5rZXlTY3JvbGxEZWx0YShrZXlEb3duKSk7XG4gICAgICAgICAgdGhpcy5zdG9wRXZlbnRDb25kaXRpb25hbGx5KGV2ZW50LCBzY3JvbGxlZCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbFRodW1iQnk6IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICB2YXIgdGh1bWJQb3NpdGlvbiA9IHRoaXMudGh1bWJQb3NpdGlvbigpO1xuICAgICAgICB0aHVtYlBvc2l0aW9uICs9IGRlbHRhO1xuICAgICAgICB0aHVtYlBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbk9yTWF4KHRodW1iUG9zaXRpb24sIHRoaXMubWF4VGh1bWJQb3NpdGlvbik7XG4gICAgICAgIHZhciBvbGRTY3JvbGxQZXJjZW50ID0gdGhpcy5zY3JvbGxQZXJjZW50O1xuICAgICAgICB0aGlzLnNjcm9sbFBlcmNlbnQgPSB0aHVtYlBvc2l0aW9uIC8gdGhpcy5tYXhUaHVtYlBvc2l0aW9uO1xuICAgICAgICBpZiAob2xkU2Nyb2xsUGVyY2VudCAhPSB0aGlzLnNjcm9sbFBlcmNlbnQpIHtcbiAgICAgICAgICB2YXIgb3ZlcnZpZXdQb3NpdGlvbiA9ICh0aHVtYlBvc2l0aW9uICogdGhpcy5tYXhPdmVydmlld1Bvc2l0aW9uKSAvIHRoaXMubWF4VGh1bWJQb3NpdGlvbjtcbiAgICAgICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKG92ZXJ2aWV3UG9zaXRpb24sIHRodW1iUG9zaXRpb24pO1xuICAgICAgICAgIHRoaXMudHJpZ2dlckN1c3RvbVNjcm9sbChvbGRTY3JvbGxQZXJjZW50KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9LFxuXG4gICAgICB0aHVtYlBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiR0aHVtYi5wb3NpdGlvbigpW3RoaXMuc2l6aW5nLm9mZnNldENvbXBvbmVudCgpXTtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbE92ZXJ2aWV3Qnk6IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICB2YXIgb3ZlcnZpZXdQb3NpdGlvbiA9IHRoaXMub3ZlcnZpZXdQb3NpdGlvbigpICsgZGVsdGE7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcm9sbE92ZXJ2aWV3VG8ob3ZlcnZpZXdQb3NpdGlvbiwgZmFsc2UpO1xuICAgICAgfSxcblxuICAgICAgb3ZlcnZpZXdQb3NpdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLXRoaXMuc2Nyb2xsYWJsZS4kb3ZlcnZpZXcucG9zaXRpb24oKVt0aGlzLnNpemluZy5vZmZzZXRDb21wb25lbnQoKV07XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxPdmVydmlld1RvOiBmdW5jdGlvbiAob3ZlcnZpZXdQb3NpdGlvbiwgYW5pbWF0ZSkge1xuICAgICAgICBvdmVydmlld1Bvc2l0aW9uID0gdGhpcy5wb3NpdGlvbk9yTWF4KG92ZXJ2aWV3UG9zaXRpb24sIHRoaXMubWF4T3ZlcnZpZXdQb3NpdGlvbik7XG4gICAgICAgIHZhciBvbGRTY3JvbGxQZXJjZW50ID0gdGhpcy5zY3JvbGxQZXJjZW50O1xuICAgICAgICB0aGlzLnNjcm9sbFBlcmNlbnQgPSBvdmVydmlld1Bvc2l0aW9uIC8gdGhpcy5tYXhPdmVydmlld1Bvc2l0aW9uO1xuICAgICAgICBpZiAob2xkU2Nyb2xsUGVyY2VudCAhPSB0aGlzLnNjcm9sbFBlcmNlbnQpIHtcbiAgICAgICAgICB2YXIgdGh1bWJQb3NpdGlvbiA9IHRoaXMuc2Nyb2xsUGVyY2VudCAqIHRoaXMubWF4VGh1bWJQb3NpdGlvbjtcbiAgICAgICAgICBpZiAoYW5pbWF0ZSlcbiAgICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsUG9zaXRpb25XaXRoQW5pbWF0aW9uKG92ZXJ2aWV3UG9zaXRpb24sIHRodW1iUG9zaXRpb24pO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsUG9zaXRpb24ob3ZlcnZpZXdQb3NpdGlvbiwgdGh1bWJQb3NpdGlvbik7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyQ3VzdG9tU2Nyb2xsKG9sZFNjcm9sbFBlcmNlbnQpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9LFxuXG4gICAgICBwb3NpdGlvbk9yTWF4OiBmdW5jdGlvbiAocCwgbWF4KSB7XG4gICAgICAgIGlmIChwIDwgMClcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgZWxzZSBpZiAocCA+IG1heClcbiAgICAgICAgICByZXR1cm4gbWF4O1xuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9LFxuXG4gICAgICB0cmlnZ2VyQ3VzdG9tU2Nyb2xsOiBmdW5jdGlvbiAob2xkU2Nyb2xsUGVyY2VudCkge1xuICAgICAgICB0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnQudHJpZ2dlcihcImN1c3RvbVNjcm9sbFwiLCB7XG4gICAgICAgICAgICBzY3JvbGxBeGlzOiB0aGlzLnNpemluZy5zY3JvbGxBeGlzKCksXG4gICAgICAgICAgICBkaXJlY3Rpb246IHRoaXMuc2l6aW5nLnNjcm9sbERpcmVjdGlvbihvbGRTY3JvbGxQZXJjZW50LCB0aGlzLnNjcm9sbFBlcmNlbnQpLFxuICAgICAgICAgICAgc2Nyb2xsUGVyY2VudDogdGhpcy5zY3JvbGxQZXJjZW50ICogMTAwXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSxcblxuICAgICAgcmVzY3JvbGw6IGZ1bmN0aW9uIChrZWVwUG9zaXRpb24pIHtcbiAgICAgICAgaWYgKGtlZXBQb3NpdGlvbikge1xuICAgICAgICAgIHZhciBvdmVydmlld1Bvc2l0aW9uID0gdGhpcy5wb3NpdGlvbk9yTWF4KHRoaXMub3ZlcnZpZXdQb3NpdGlvbigpLCB0aGlzLm1heE92ZXJ2aWV3UG9zaXRpb24pO1xuICAgICAgICAgIHRoaXMuc2Nyb2xsUGVyY2VudCA9IG92ZXJ2aWV3UG9zaXRpb24gLyB0aGlzLm1heE92ZXJ2aWV3UG9zaXRpb247XG4gICAgICAgICAgdmFyIHRodW1iUG9zaXRpb24gPSB0aGlzLnNjcm9sbFBlcmNlbnQgKiB0aGlzLm1heFRodW1iUG9zaXRpb247XG4gICAgICAgICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbihvdmVydmlld1Bvc2l0aW9uLCB0aHVtYlBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgdGh1bWJQb3NpdGlvbiA9IHRoaXMuc2Nyb2xsUGVyY2VudCAqIHRoaXMubWF4VGh1bWJQb3NpdGlvbjtcbiAgICAgICAgICB2YXIgb3ZlcnZpZXdQb3NpdGlvbiA9IHRoaXMuc2Nyb2xsUGVyY2VudCAqIHRoaXMubWF4T3ZlcnZpZXdQb3NpdGlvbjtcbiAgICAgICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKG92ZXJ2aWV3UG9zaXRpb24sIHRodW1iUG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBzZXRTY3JvbGxQb3NpdGlvbjogZnVuY3Rpb24gKG92ZXJ2aWV3UG9zaXRpb24sIHRodW1iUG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy4kdGh1bWIuY3NzKHRoaXMuc2l6aW5nLm9mZnNldENvbXBvbmVudCgpLCB0aHVtYlBvc2l0aW9uICsgXCJweFwiKTtcbiAgICAgICAgdGhpcy5zY3JvbGxhYmxlLiRvdmVydmlldy5jc3ModGhpcy5zaXppbmcub2Zmc2V0Q29tcG9uZW50KCksIC1vdmVydmlld1Bvc2l0aW9uICsgXCJweFwiKTtcbiAgICAgIH0sXG5cbiAgICAgIHNldFNjcm9sbFBvc2l0aW9uV2l0aEFuaW1hdGlvbjogZnVuY3Rpb24gKG92ZXJ2aWV3UG9zaXRpb24sIHRodW1iUG9zaXRpb24pIHtcbiAgICAgICAgdmFyIHRodW1iQW5pbWF0aW9uT3B0cyA9IHt9O1xuICAgICAgICB2YXIgb3ZlcnZpZXdBbmltYXRpb25PcHRzID0ge307XG4gICAgICAgIHRodW1iQW5pbWF0aW9uT3B0c1t0aGlzLnNpemluZy5vZmZzZXRDb21wb25lbnQoKV0gPSB0aHVtYlBvc2l0aW9uICsgXCJweFwiO1xuICAgICAgICB0aGlzLiR0aHVtYi5hbmltYXRlKHRodW1iQW5pbWF0aW9uT3B0cywgdGhpcy5zY3JvbGxhYmxlLm9wdGlvbnMuYW5pbWF0aW9uU3BlZWQpO1xuICAgICAgICBvdmVydmlld0FuaW1hdGlvbk9wdHNbdGhpcy5zaXppbmcub2Zmc2V0Q29tcG9uZW50KCldID0gLW92ZXJ2aWV3UG9zaXRpb24gKyBcInB4XCI7XG4gICAgICAgIHRoaXMuc2Nyb2xsYWJsZS4kb3ZlcnZpZXcuYW5pbWF0ZShvdmVydmlld0FuaW1hdGlvbk9wdHMsIHRoaXMuc2Nyb2xsYWJsZS5vcHRpb25zLmFuaW1hdGlvblNwZWVkKTtcbiAgICAgIH0sXG5cbiAgICAgIGNhbGN1bGF0ZU1heFRodW1iUG9zaXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIHRoaXMuc2l6aW5nLnNpemUodGhpcy4kc2Nyb2xsQmFyKSAtIHRoaXMudGh1bWJTaXplKTtcbiAgICAgIH0sXG5cbiAgICAgIGNhbGN1bGF0ZU1heE92ZXJ2aWV3UG9zaXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIHRoaXMuc2l6aW5nLnNpemUodGhpcy5zY3JvbGxhYmxlLiRvdmVydmlldykgLSB0aGlzLnNpemluZy5zaXplKHRoaXMuc2Nyb2xsYWJsZS4kdmlld1BvcnQpKTtcbiAgICAgIH0sXG5cbiAgICAgIHNldFNjcm9sbEV2ZW50OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGF0dHIgPSBcInBhZ2VcIiArIHRoaXMuc2l6aW5nLnNjcm9sbEF4aXMoKTtcbiAgICAgICAgaWYgKCF0aGlzLnNjcm9sbEV2ZW50IHx8IHRoaXMuc2Nyb2xsRXZlbnRbYXR0cl0gIT0gZXZlbnRbYXR0cl0pXG4gICAgICAgICAgdGhpcy5zY3JvbGxFdmVudCA9IHtwYWdlWDogZXZlbnQucGFnZVgsIHBhZ2VZOiBldmVudC5wYWdlWX07XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxUb0VsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gICAgICAgIGlmICh0aGlzLnNpemluZy5pc0luc2lkZSgkZWxlbWVudCwgdGhpcy5zY3JvbGxhYmxlLiRvdmVydmlldykgJiYgIXRoaXMuc2l6aW5nLmlzSW5zaWRlKCRlbGVtZW50LCB0aGlzLnNjcm9sbGFibGUuJHZpZXdQb3J0KSkge1xuICAgICAgICAgIHZhciBlbGVtZW50T2Zmc2V0ID0gJGVsZW1lbnQub2Zmc2V0KCk7XG4gICAgICAgICAgdmFyIG92ZXJ2aWV3T2Zmc2V0ID0gdGhpcy5zY3JvbGxhYmxlLiRvdmVydmlldy5vZmZzZXQoKTtcbiAgICAgICAgICB2YXIgdmlld1BvcnRPZmZzZXQgPSB0aGlzLnNjcm9sbGFibGUuJHZpZXdQb3J0Lm9mZnNldCgpO1xuICAgICAgICAgIHRoaXMuc2Nyb2xsT3ZlcnZpZXdUbyhlbGVtZW50T2Zmc2V0W3RoaXMuc2l6aW5nLm9mZnNldENvbXBvbmVudCgpXSAtIG92ZXJ2aWV3T2Zmc2V0W3RoaXMuc2l6aW5nLm9mZnNldENvbXBvbmVudCgpXSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbW92ZU1vdXNlTW92ZVNjcm9sbGluZygpO1xuICAgICAgICB0aGlzLnJlbW92ZU1vdXNlV2hlZWxTY3JvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVUb3VjaFNjcm9sbGluZygpO1xuICAgICAgICB0aGlzLnJlbW92ZU1vdXNlQ2xpY2tTY3JvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVXaW5kb3dSZXNpemUoKTtcbiAgICAgIH0sXG5cbiAgICAgIHN0b3BFdmVudENvbmRpdGlvbmFsbHk6IGZ1bmN0aW9uIChldmVudCwgY29uZGl0aW9uKSB7XG4gICAgICAgIGlmIChjb25kaXRpb24gfHwgdGhpcy5zY3JvbGxhYmxlLm9wdGlvbnMucHJldmVudERlZmF1bHRTY3JvbGwpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICB2YXIgSFNpemluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB9XG5cbiAgICBIU2l6aW5nLnByb3RvdHlwZSA9IHtcbiAgICAgIHNpemU6IGZ1bmN0aW9uICgkZWwsIGFyZykge1xuICAgICAgICBpZiAoYXJnKVxuICAgICAgICAgIHJldHVybiAkZWwud2lkdGgoYXJnKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiAkZWwud2lkdGgoKTtcbiAgICAgIH0sXG5cbiAgICAgIG1pblNpemU6IGZ1bmN0aW9uICgkZWwpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KCRlbC5jc3MoXCJtaW4td2lkdGhcIikpIHx8IDA7XG4gICAgICB9LFxuXG4gICAgICBtYXhTaXplOiBmdW5jdGlvbiAoJGVsKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCgkZWwuY3NzKFwibWF4LXdpZHRoXCIpKSB8fCAwO1xuICAgICAgfSxcblxuICAgICAgZml4ZWRUaHVtYlNpemU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmZpeGVkVGh1bWJXaWR0aDtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbEJhcjogZnVuY3Rpb24gKCRlbCkge1xuICAgICAgICByZXR1cm4gJGVsLmZpbmQoXCIuc2Nyb2xsLWJhci5ob3Jpem9udGFsXCIpO1xuICAgICAgfSxcblxuICAgICAgbW91c2VEZWx0YTogZnVuY3Rpb24gKGV2ZW50MSwgZXZlbnQyKSB7XG4gICAgICAgIHJldHVybiBldmVudDIucGFnZVggLSBldmVudDEucGFnZVg7XG4gICAgICB9LFxuXG4gICAgICBvZmZzZXRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwibGVmdFwiO1xuICAgICAgfSxcblxuICAgICAgd2hlZWxEZWx0YTogZnVuY3Rpb24gKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgICAgIHJldHVybiBkZWx0YVg7XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxBeGlzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlhcIjtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbERpcmVjdGlvbjogZnVuY3Rpb24gKG9sZFBlcmNlbnQsIG5ld1BlcmNlbnQpIHtcbiAgICAgICAgcmV0dXJuIG9sZFBlcmNlbnQgPCBuZXdQZXJjZW50ID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxpbmdLZXlzOiB7XG4gICAgICAgIDM3OiBmdW5jdGlvbiAodmlld1BvcnRTaXplKSB7XG4gICAgICAgICAgcmV0dXJuIC0xMDsgLy9hcnJvdyBsZWZ0XG4gICAgICAgIH0sXG4gICAgICAgIDM5OiBmdW5jdGlvbiAodmlld1BvcnRTaXplKSB7XG4gICAgICAgICAgcmV0dXJuIDEwOyAvL2Fycm93IHJpZ2h0XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGlzSW5zaWRlOiBmdW5jdGlvbiAoZWxlbWVudCwgd3JhcHBpbmdFbGVtZW50KSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gICAgICAgIHZhciAkd3JhcHBpbmdFbGVtZW50ID0gJCh3cmFwcGluZ0VsZW1lbnQpO1xuICAgICAgICB2YXIgZWxlbWVudE9mZnNldCA9ICRlbGVtZW50Lm9mZnNldCgpO1xuICAgICAgICB2YXIgd3JhcHBpbmdFbGVtZW50T2Zmc2V0ID0gJHdyYXBwaW5nRWxlbWVudC5vZmZzZXQoKTtcbiAgICAgICAgcmV0dXJuIChlbGVtZW50T2Zmc2V0LmxlZnQgPj0gd3JhcHBpbmdFbGVtZW50T2Zmc2V0LmxlZnQpICYmXG4gICAgICAgICAgKGVsZW1lbnRPZmZzZXQubGVmdCArICRlbGVtZW50LndpZHRoKCkgPD0gd3JhcHBpbmdFbGVtZW50T2Zmc2V0LmxlZnQgKyAkd3JhcHBpbmdFbGVtZW50LndpZHRoKCkpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgdmFyIFZTaXppbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgfVxuXG4gICAgVlNpemluZy5wcm90b3R5cGUgPSB7XG5cbiAgICAgIHNpemU6IGZ1bmN0aW9uICgkZWwsIGFyZykge1xuICAgICAgICBpZiAoYXJnKVxuICAgICAgICAgIHJldHVybiAkZWwuaGVpZ2h0KGFyZyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gJGVsLmhlaWdodCgpO1xuICAgICAgfSxcblxuICAgICAgbWluU2l6ZTogZnVuY3Rpb24gKCRlbCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoJGVsLmNzcyhcIm1pbi1oZWlnaHRcIikpIHx8IDA7XG4gICAgICB9LFxuXG4gICAgICBtYXhTaXplOiBmdW5jdGlvbiAoJGVsKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCgkZWwuY3NzKFwibWF4LWhlaWdodFwiKSkgfHwgMDtcbiAgICAgIH0sXG5cbiAgICAgIGZpeGVkVGh1bWJTaXplOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5maXhlZFRodW1iSGVpZ2h0O1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsQmFyOiBmdW5jdGlvbiAoJGVsKSB7XG4gICAgICAgIHJldHVybiAkZWwuZmluZChcIi5zY3JvbGwtYmFyLnZlcnRpY2FsXCIpO1xuICAgICAgfSxcblxuICAgICAgbW91c2VEZWx0YTogZnVuY3Rpb24gKGV2ZW50MSwgZXZlbnQyKSB7XG4gICAgICAgIHJldHVybiBldmVudDIucGFnZVkgLSBldmVudDEucGFnZVk7XG4gICAgICB9LFxuXG4gICAgICBvZmZzZXRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwidG9wXCI7XG4gICAgICB9LFxuXG4gICAgICB3aGVlbERlbHRhOiBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICAgICAgcmV0dXJuIGRlbHRhWTtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbEF4aXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiWVwiO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsRGlyZWN0aW9uOiBmdW5jdGlvbiAob2xkUGVyY2VudCwgbmV3UGVyY2VudCkge1xuICAgICAgICByZXR1cm4gb2xkUGVyY2VudCA8IG5ld1BlcmNlbnQgPyBcImRvd25cIiA6IFwidXBcIjtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbGluZ0tleXM6IHtcbiAgICAgICAgMzg6IGZ1bmN0aW9uICh2aWV3UG9ydFNpemUpIHtcbiAgICAgICAgICByZXR1cm4gLTEwOyAvL2Fycm93IHVwXG4gICAgICAgIH0sXG4gICAgICAgIDQwOiBmdW5jdGlvbiAodmlld1BvcnRTaXplKSB7XG4gICAgICAgICAgcmV0dXJuIDEwOyAvL2Fycm93IGRvd25cbiAgICAgICAgfSxcbiAgICAgICAgMzM6IGZ1bmN0aW9uICh2aWV3UG9ydFNpemUpIHtcbiAgICAgICAgICByZXR1cm4gLSh2aWV3UG9ydFNpemUgLSAyMCk7IC8vcGFnZSB1cFxuICAgICAgICB9LFxuICAgICAgICAzNDogZnVuY3Rpb24gKHZpZXdQb3J0U2l6ZSkge1xuICAgICAgICAgIHJldHVybiB2aWV3UG9ydFNpemUgLSAyMDsgLy9wYWdlIGRvd25cbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgaXNJbnNpZGU6IGZ1bmN0aW9uIChlbGVtZW50LCB3cmFwcGluZ0VsZW1lbnQpIHtcbiAgICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KTtcbiAgICAgICAgdmFyICR3cmFwcGluZ0VsZW1lbnQgPSAkKHdyYXBwaW5nRWxlbWVudCk7XG4gICAgICAgIHZhciBlbGVtZW50T2Zmc2V0ID0gJGVsZW1lbnQub2Zmc2V0KCk7XG4gICAgICAgIHZhciB3cmFwcGluZ0VsZW1lbnRPZmZzZXQgPSAkd3JhcHBpbmdFbGVtZW50Lm9mZnNldCgpO1xuICAgICAgICByZXR1cm4gKGVsZW1lbnRPZmZzZXQudG9wID49IHdyYXBwaW5nRWxlbWVudE9mZnNldC50b3ApICYmXG4gICAgICAgICAgKGVsZW1lbnRPZmZzZXQudG9wICsgJGVsZW1lbnQuaGVpZ2h0KCkgPD0gd3JhcHBpbmdFbGVtZW50T2Zmc2V0LnRvcCArICR3cmFwcGluZ0VsZW1lbnQuaGVpZ2h0KCkpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob3B0aW9ucyA9PSB1bmRlZmluZWQpXG4gICAgICAgIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcbiAgICAgIGlmICh0eXBlb2Yob3B0aW9ucykgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB2YXIgc2Nyb2xsYWJsZSA9ICQodGhpcykuZGF0YShcInNjcm9sbGFibGVcIik7XG4gICAgICAgIGlmIChzY3JvbGxhYmxlKVxuICAgICAgICAgIHNjcm9sbGFibGVbb3B0aW9uc10oYXJncyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0eXBlb2Yob3B0aW9ucykgPT0gXCJvYmplY3RcIikge1xuICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICBuZXcgU2Nyb2xsYWJsZSgkKHRoaXMpLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgXCJJbnZhbGlkIHR5cGUgb2Ygb3B0aW9uc1wiO1xuICAgIH0pO1xuXG4gIH1cbiAgO1xuXG59KVxuICAoalF1ZXJ5KTtcblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIHR5cGVzID0gWydET01Nb3VzZVNjcm9sbCcsICdtb3VzZXdoZWVsJ107XG5cbiAgaWYgKCQuZXZlbnQuZml4SG9va3MpIHtcbiAgICBmb3IgKHZhciBpID0gdHlwZXMubGVuZ3RoOyBpOykge1xuICAgICAgJC5ldmVudC5maXhIb29rc1sgdHlwZXNbLS1pXSBdID0gJC5ldmVudC5tb3VzZUhvb2tzO1xuICAgIH1cbiAgfVxuXG4gICQuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsID0ge1xuICAgIHNldHVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB0eXBlcy5sZW5ndGg7IGk7KSB7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGVzWy0taV0sIGhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbm1vdXNld2hlZWwgPSBoYW5kbGVyO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0ZWFyZG93bjogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBmb3IgKHZhciBpID0gdHlwZXMubGVuZ3RoOyBpOykge1xuICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlc1stLWldLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25tb3VzZXdoZWVsID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgJC5mbi5leHRlbmQoe1xuICAgIG1vdXNld2hlZWw6IGZ1bmN0aW9uIChmbikge1xuICAgICAgcmV0dXJuIGZuID8gdGhpcy5iaW5kKFwibW91c2V3aGVlbFwiLCBmbikgOiB0aGlzLnRyaWdnZXIoXCJtb3VzZXdoZWVsXCIpO1xuICAgIH0sXG5cbiAgICB1bm1vdXNld2hlZWw6IGZ1bmN0aW9uIChmbikge1xuICAgICAgcmV0dXJuIHRoaXMudW5iaW5kKFwibW91c2V3aGVlbFwiLCBmbik7XG4gICAgfVxuICB9KTtcblxuXG4gIGZ1bmN0aW9uIGhhbmRsZXIoZXZlbnQpIHtcbiAgICB2YXIgb3JnRXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQsIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGRlbHRhID0gMCwgcmV0dXJuVmFsdWUgPSB0cnVlLCBkZWx0YVggPSAwLCBkZWx0YVkgPSAwO1xuICAgIGV2ZW50ID0gJC5ldmVudC5maXgob3JnRXZlbnQpO1xuICAgIGV2ZW50LnR5cGUgPSBcIm1vdXNld2hlZWxcIjtcblxuICAgIC8vIE9sZCBzY2hvb2wgc2Nyb2xsd2hlZWwgZGVsdGFcbiAgICBpZiAob3JnRXZlbnQud2hlZWxEZWx0YSkge1xuICAgICAgZGVsdGEgPSBvcmdFdmVudC53aGVlbERlbHRhIC8gMTIwO1xuICAgIH1cbiAgICBpZiAob3JnRXZlbnQuZGV0YWlsKSB7XG4gICAgICBkZWx0YSA9IC1vcmdFdmVudC5kZXRhaWwgLyAzO1xuICAgIH1cblxuICAgIC8vIE5ldyBzY2hvb2wgbXVsdGlkaW1lbnNpb25hbCBzY3JvbGwgKHRvdWNocGFkcykgZGVsdGFzXG4gICAgZGVsdGFZID0gZGVsdGE7XG5cbiAgICAvLyBHZWNrb1xuICAgIGlmIChvcmdFdmVudC5heGlzICE9PSB1bmRlZmluZWQgJiYgb3JnRXZlbnQuYXhpcyA9PT0gb3JnRXZlbnQuSE9SSVpPTlRBTF9BWElTKSB7XG4gICAgICBkZWx0YVkgPSAwO1xuICAgICAgZGVsdGFYID0gZGVsdGE7XG4gICAgfVxuXG4gICAgLy8gV2Via2l0XG4gICAgaWYgKG9yZ0V2ZW50LndoZWVsRGVsdGFZICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlbHRhWSA9IG9yZ0V2ZW50LndoZWVsRGVsdGFZIC8gMTIwO1xuICAgIH1cbiAgICBpZiAob3JnRXZlbnQud2hlZWxEZWx0YVggIT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVsdGFYID0gb3JnRXZlbnQud2hlZWxEZWx0YVggLyAxMjA7XG4gICAgfVxuXG4gICAgLy8gQWRkIGV2ZW50IGFuZCBkZWx0YSB0byB0aGUgZnJvbnQgb2YgdGhlIGFyZ3VtZW50c1xuICAgIGFyZ3MudW5zaGlmdChldmVudCwgZGVsdGEsIGRlbHRhWCwgZGVsdGFZKTtcblxuICAgIHJldHVybiAoJC5ldmVudC5kaXNwYXRjaCB8fCAkLmV2ZW50LmhhbmRsZSkuYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxufSkoalF1ZXJ5KTtcbiJdfQ==
